<script src="dist/js/dialog.js"></script>
<div class="box box-solid">
	<div class="box-body">
		<table class="table table-striped">
			<tbody>
				<tr>
					<th></th>
					<th>手机号</th>
					<th>昵称</th>
					<th>注册时间</th>
					<th>屏蔽</th>
				</tr>

				#foreach( $user in $users)
				<tr>
					<td style="vertical-align: middle !important;">$velocityCount</td>
					<td style="vertical-align: middle !important;">$user.phone</td>
					<td style="vertical-align: middle !important;">$!user.nickname</td>
					<td style="vertical-align: middle !important;">$dateTool.format('yyyy-MM-dd
						HH:mm:ss', $user.dateCreated)</td>
					<td><button class="btn btn-primary"
							onclick="btnOnClick(this);" data-userid="$user.id"
							data-name="$user.nickname">#if($user.canLineToSaler)屏
							蔽#{else}解除屏蔽#end</button></td>
				</tr>
				#end
			</tbody>
		</table>

		<script type="text/javascript">
			function btnOnClick(event) {
				var userId = event.getAttribute("data-userid");
				var name = event.getAttribute("data-name");

				document.getElementById("id").value = userId;

				var areaCont = '确定要屏蔽用户' + name + '吗？<br>屏蔽后该用户将不能与导购员连线哟！';
				$("#tips").html(areaCont);
				showDialog();
			}

			function save() {
				var userId = document.getElementById("id").value;

				$.post("shops",	null,function(json) {
									if (json.status == "200") {
										var shop = json.data;
										var areaCont = '';
										for (var i = 0; i < shop.length; i++) {
											if (i == 0)
												areaCont += '<li class="active" onClick="selectShop('
														+ shop[i].id
														+ ');"><a href="javascript:void(0)"><i class="fa fa-circle-o"></i>'
														+ shop[i].name
														+ '</a></li>';
											else
												areaCont += '<li class="active" onClick="selectShop('
														+ shop[i].id
														+ ');"><a href="javascript:void(0)"><i class="fa fa-circle-o"></i>'
														+ shop[i].name
														+ '</a></li>';
										}										;
										$("#shops").html(areaCont);
										selectShop(shop[0].id);
									} else {
										alert("error")
									}
								});
			}
		</script>
	</div>


	<!--------------------------添加/修改信息的弹出层---------------------------->
	<div id="Dialog" class="modal fade" tabindex="-1" role="dialog"
		aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header bg-primary">
					<button type="button" class="close" data-dismiss="modal"
						aria-hidden="true"></button>
					<h4 class="modal-title">
						<i class="icon-pencil"></i> <span id="dialogTitle"
							style="font-weight: bold">警告</span>
					</h4>
				</div>
				<form class="form-horizontal form-bordered form-row-strippe"
					id="editform" action="#" data-toggle="validator"
					enctype="multipart/form-data">
					<div class="modal-body">
						<div class="row">
							<label id="tips"
								style="vertical-align: middle; margin-left: 30px;">确定要屏蔽该用户？<br>屏蔽后该用户将不能与导购员连线哟！
							</label>
						</div>
					</div>
					<div class="modal-footer bg-info">
						<input type="hidden" id="id" name="id" />
						<button onclick="return save()" id="btnOk" class="btn btn-primary">确定</button>
						<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
					</div>
				</form>
			</div>
		</div>
	</div>
	<!--  弹出框结束 -->

</div>
